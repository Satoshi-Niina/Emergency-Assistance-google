# バックアップ・一時ファイル・キャッシュ・不要データ
knowledge-base/backups/
knowledge-base/temp/
knowledge-base/chat-exports/json/*
knowledge-base/chat-exports/images/*
knowledge-base/troubleshooting/flows/*
knowledge-base/troubleshooting/images/*
knowledge-base/vectors/embeddings/*
knowledge-base/vectors/indexes/*
!knowledge-base/**/.gitkeep
!knowledge-base/**/README.md
knowledge-base-backup-*/
logs-temp/
cache/
dist.zip
# クリーンアティング�E対象ファイル
*.log
*.tmp
*.temp
*.bak
*~
*backup*
*copy*
*old*
*test*
*spec*
*.test.*
*.spec.*
cleanup-commit.md
final-deploy.txt
force-deploy.txt
frontend-trigger.txt
trigger.txt

# セキュリティ: パスワードが含まれる開発用スクリプト（ローカルのみ使用）
server/reset-passwords.mjs
server/find-password.mjs
server/test-login.mjs
server/check-user-passwords.mjs

# ローカル開発専用サーバー（本番では不要）
server/unified-hot-reload-server.js
# Google Cloud Service Account Keys (NEVER commit these!)
# サービスアカウントキーは絶対にコミットしないこと
*service-account*.json
*sa-key*.json
*gcp-key*.json
emergency-*.json
service-account*.json
# BUT ALLOW specific config files
!tsconfig*.json
!package*.json
!*.config.json
!**/meta/*.json
!function.json

# Environment variables (Local・Docker use)
# Exclude ALL .env files by default

# ALLOW only these specific files needed for deployment (MUST come before broad patterns)
!server/.env.production     # ✅ Server production template (sanitized)
!client/.env.production     # ✅ Client production template (sanitized)
!client/.env.template       # ✅ Client template for reference
!*.env.example              # ✅ Allow example env files
!*.env.template             # ✅ Allow template env files

# Now exclude all other .env files (including development files with secrets)
*.env
*.env.*
.env
.env.local
.env.development            # ⚠️ CRITICAL: Contains API keys and secrets
.env.staging
client/.env.development     # ⚠️ CRITICAL: Exclude client dev env
server/.env.development     # ⚠️ CRITICAL: Exclude server dev env
# Essential files - NEVER exclude
# Package lock files (for reproducible builds)
!package-lock.json
!*/package-lock.json
!server/package.json
!server/index.js
!server/azure-server.js
!server/fallback-server.js
!server/web.config
# Build outputs - NEVER commit build artifacts
dist/
client/dist/
client/dist-dev/
server/dist/
shared/dist/
build/
.next/
.nuxt/
out/
.parcel-cache/
.vite/
.turbo/
# サーバ�EのSQLマイグレーションファイルを除外（忁Eーに応じてコメントアウト！E# server/migrations/*.sql
.swc/
.cache/
.eslintcache/
coverage/
.vercel/output/
.svelte-kit/
# Environment variables - HANDLED ABOVE
#.env
#.env.local
#.env.development
#.env.test
#.env.production
#.env.development.local
# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
logs/
webapp_logs/
# Runtime data
pids
*.pid
*.seed
*.pid.lock
# Coverage directory used by tools like istanbul
coverage/
*.lcov
# nyc test coverage
.nyc_output
# Dependency directories
node_modules/
jspm_packages/
# Optional npm cache directory
.npm
# Optional eslint cache
.eslintcache
# Optional REPL history
.node_repl_history
# Output of 'npm pack'
*.tgz
# Yarn Integrity file
.yarn-integrity
# dotenv environment variables file - HANDLED ABOVE
#.env
# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache
# next.js build output
.next
# nuxt.js build output
.nuxt
# vuepress build output
.vuepress/dist
# Serverless directories
.serverless
# FuseBox cache
.fusebox/
# DynamoDB Local files
.dynamodb/
# TernJS port file
.tern-port
# Stores VSCode versions used for testing VSCode extensions
.vscode-test
# Temporary files
temp/
uploads/temp/
knowledge-base/temp/
temp/dev/
uploads/dev/
logs/dev/
# Backup files
backups/
knowledge-base/backups/
# Docker
.dockerignore
# IDE
.idea/
*.swp
*.swo
# OS
.DS_Store
Thumbs.db
# Azure
.azure/
# Local development
*.local
# Database - EXCLUDE PRODUCTION DATA ONLY
#*.db
#*.sqlite
#*.sqlite3
# But allow development database
!server/app.db
# Uploads (keep structure but ignore content)
uploads/*
!uploads/.gitkeep
# Knowledge base temp files
knowledge-base/temp/*
!knowledge-base/temp/.gitkeep
# Build artifacts
*.tsbuildinfo
# ========================================
# Deployment and CI/CD
# ========================================
# Deployment artifacts
.vercel/
.railway/
.netlify/
# CI/CD logs
.github/workflows/logs/
# Deployment configs (if containing secrets)
deploy-config.json
deploy-secrets.json
# ========================================
# Cloud Platform Specific
# ========================================
# Vercel
.vercel
# Railway
.railway
# Netlify
.netlify
# Heroku
.heroku/
# Google Cloud
.gcloud/
gcloud-credentials.json
*-credentials.json
# ========================================
# Security and Secrets
# ========================================
# API keys and secrets
secrets.json
*.key
*.pem
*.p12
*api-key*
*sGoogle Cloud credentials
*service-account*.json
*gcp-*.json
*google-credentials*.json
# ecret*
*token*
# *.env.production - Allow for deployment configuration
*.env.staging
# SSL certificates
*.crt
*.cert
*.pem
# Security scan results
security-report.json
vulnerability-scan.json
# Backup files with potential secrets
*.bak.env
*backup*.env
# Other API keys
*api*key*
*API*KEY*
*secret*key*
*SECRET*KEY*
# ========================================
# Monitoring and Analytics
# ========================================
# Sentry
.sentryclirc
# Analytics
analytics.json
metrics.json
# ========================================
# Development Tools
# ========================================
# Local development databases - HANDLED ABOVE
#*.sqlite
#*.db
# Local cache
.cache/
.parcel-cache/
# Local logs
logs/
# ========================================
# OS and Editor Specific
# ========================================
# macOS
.DS_Store
.AppleDouble
.LSOverride
# Windows
Thumbs.db
ehthumbs.db
Desktop.ini
# Linux
*~
# VSCode
.vscode/settings.json
.vscode/launch.json
.vscode/extensions.json
# IntelliJ
.idea/
*.iml
*.ipr
*.iws
# Sublime Text
*.sublime-project
*.sublime-workspace
# --- Docker runtime ---
docker/.azurite/
docker/data/
# --- Continue AI and other tools ---
.continue/
.conda/
.config/server/deploy.zip

# ========================================
# Development Files - Exclude from Deployment
# ========================================

# ⚠️ IMPORTANT: Whitelist MUST come BEFORE exclusion patterns
# Allow specific scripts needed for CI/CD
!scripts/check-rsc-vulnerabilities.mjs
!scripts/check-build-before-push.js
!scripts/README-check-rsc-vulnerabilities.md
!client/scripts/replace-env.cjs

# ⚠️ CRITICAL: server/src/api/ contains Azure Functions handlers - DO NOT EXCLUDE
!server/src/
!server/src/**

# Now exclude other development scripts
scripts/*

# Development database files
*.db
*.sqlite
*.sqlite3
!server/app.db  # Allow development database if needed

# Temporary and archive files
*.zip
*.tar
*.tar.gz
*.rar
*.7z
latest-logs.zip
webapp_logs.zip
deploy.zip
server/deploy.zip

# Development configuration files
*.backup
*.broken
*.old

# Knowledge base - exclude backups and temp files
knowledge-base/backups/
knowledge-base/temp/
knowledge-base/exports/
knowledge-base/doc_*/

# Development data files
data/ai-assist-settings.json

# SQL files (migrations are tracked in server/db/migrations/)
*.sql
!server/db/migrations/*.sql

# PowerShell and shell scripts (development only)
*.ps1
*.sh
*.bat
*.cmd

# Development environment files
env.development
server/env.development
server/.env.development  # ⚠️ CRITICAL: Exclude to prevent API key leaks
server/startup.txt
server/server_run.log

# Development server files (NOT needed in production)
server/unified-hot-reload-server.js
server/index.dev.js
server/index.dev.ts
server/fallback-server.js
server/azure-server-debug.js
server/azure-diagnosis.js
server/minimal-package.json
server/PATCHES_*.txt
server/deploy.cmd

# Development utility scripts (NOT needed in production)
server/check-*.js
server/check-*.cjs
server/fix-*.js
server/fix-*.cjs
server/create-*.js
server/create-*.sql
server/hash-passwords.js
server/migrate-*.js
server/trigger.js
server/startup-migration.js

# Development storage filess (consolidated)
# サービスアカウントキーファイルは絶対にコミットしない
*service-account*.json
local-dev-sa.json
gcp-sa-key
# OneDrive sync files (Windows)
~$*
*.tmp

# Google Cloud Service Account Key
*.json
# または特定のファイル名
local-dev-sa.json